<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no"/>

    <link rel="stylesheet" href="css/main.css"/>
    <style type="text/css">
        #container {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            /*box-sizing: border-box;*/
            /*border: 20px solid #000;*/
            overflow: hidden;
        }

        .page {
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            position: absolute;
            /*perspective: 1000px;*/
            overflow: hidden;
            background-color: white;
        }

        .up {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 50px;
            border: 1px solid #000;
        }

        .down {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 50px;
            border: 1px solid #000;
        }

        .page3 > img {
            display: block;
            width: 100px;
            height: 100px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translateX(-50%) translateY(-50%);
            opacity: 0;
        }

        .page3 .txt {
            font-size: 40px;
            color: #fff;
            opacity: 0;
            position: absolute;
            font-weight: bold;
        }

        .page3 .des {
            font-size: 22px;
            color: #fff;
            opacity: 0;
            position: absolute;
        }
    </style>

    <title></title>
</head>
<body>
<div id='container'>
    <div class='page page1'>
        <div class='up'>1</div>
        <div class='down'>1</div>
    </div>
    <div class='page page2'>
        <div class='up'>2</div>
        <div class='down'>2</div>
    </div>
    <div class='page page3'>
        <div class='up'>3</div>
        <div class='down'>3</div>
    </div>
    <div class='page page4'>
        123123
        <div class='up'>4</div>
        <div class='down'>4</div>
    </div>
    <div class='page page5'>
        <div class='up'>5</div>
        <div class='down'>5</div>
    </div>

</div>

<script src="http://apps.bdimg.com/libs/jquery/1.8.3/jquery.min.js"></script>
<script src='js/tool/velocity.min.js'></script>
<script src='js/tool/velocity.ui.js'></script>
<script src='js/globalManager/globalManager.js'></script>
<script>
    //jqObj................................
    GM.$up = $('.up');
    GM.$down = $('.down');
    GM.$pages = $('.page');
    GM.pageNum = GM.$pages.length;

    //paras................................
    GM.pageIndex = 0; //索引从0开始
    GM.isConVelocited = false;
    GM.winH = $(window).height();
    GM.winW = $(window).width();

    //initDy........................................
    GM.$pages.velocity({"translateY": GM.winH}, 0, 'linear');
    GM.$pages.eq(GM.pageIndex).velocity({"translateY": 0}, 0, 'linear');


    //bindClickEvent..........................................
    GM.$up.click(function (e) {
        var e = e || event;
        if (GM.isConVelocited) {
            return;
        }
        var oldIndex = GM.pageIndex;

        GM.pageIndex--;
        GM.pageIndex = GM.pageIndex < 0 ? 0 : GM.pageIndex;//验收

        DoPageChange(oldIndex, GM.pageIndex, 1000);
    })
    GM.$down.click(function (e) {
        var e = e || event;
        if (GM.isConVelocited) {
            return;
        }
        var oldIndex = GM.pageIndex;

        GM.pageIndex++;
        GM.pageIndex = GM.pageIndex >= GM.pageNum ? ( GM.pageNum - 1) : GM.pageIndex;//验收

        DoPageChange(oldIndex, GM.pageIndex, 1000);
    })


    function DoPageChange(oldIndex, pageIndex, duration) {

        if (oldIndex == pageIndex) {
            return;
        }

        GM.isConVelocited = true;
        var duration = duration;
        var ease = 'easeInOutQuart';

        //判断当前的page是上移还是下移
        var dir = (oldIndex < pageIndex) ? 'up' : 'down'; //-1 1

        //上移的代码
        if (dir == 'up') {
            GM.$pages.eq(oldIndex).delay(0).velocity({translateY: -GM.winH}, duration, ease);
            GM.$pages.eq(pageIndex).delay(0).velocity({translateY: GM.winH}, 0).velocity({translateY: 0}, duration, ease);
        }
        //下移的代码
        else {
            GM.$pages.eq(oldIndex).delay(0).velocity({translateY: GM.winH}, duration, ease);
            GM.$pages.eq(pageIndex).delay(0).velocity({translateY: -GM.winH}, 0).velocity({translateY: 0}, duration, ease);
        }

        //翻页截流.......................................
        setTimeout(function () {
            GM.isConVelocited = false;
        }, 1500)

        //进场入场动画...................................
        AnimateInArr[pageIndex]();
        AnimateOutArr[oldIndex]();

    }
    window.DoPageChange = DoPageChange;


    var AnimateInArr =
            [
                function () {
                },
                function () {
                    page2In();
                },
                function () {
                },
                function () {
                },
                function () {
                },
            ];
    var AnimateOutArr =
            [
                function () {
                },
                function () {
                },
                function () {
                },
                function () {
                },
                function () {
                },
            ];

</script>
<script src='js/page/page2.js'></script>
<script src='js/page/page3.js'></script>
</body>
</html>